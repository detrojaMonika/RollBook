
@{
    ViewBag.Title = "Stock";
}

<h2 style="text-align:center">Stock Details</h2>

<br />
<div class="row">
    <div class="col-md-12 col-sm-12 col-12">
        <table id="datatable" class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
            <thead>
                <tr>
                    <th>Size</th>
                    <th>DNR</th>
                    <th>Quality</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody id="data"></tbody>
        </table>
    </div>
</div>

@section scripts{
    <script>
        $(document).ready(function () {
            GetData();

        });

        function GetData() {

            $.ajax({
                type: "POST",
                url: "/Stock/GetData",
                contentType: "application/json",
                dataType: "json",
                success: function (mRes) {

                    var obj = JSON.parse(mRes);
                    var iHTML = "";
                    if (obj.length === 0) {
                        $("#data").html("<tr><td colspan='5' align='center'>No Data Found.</td></tr>");
                    }
                    else {

                        var sum = 0;
                        for (var i = 0; i < obj.length; i++) {
                            sum += parseFloat(obj[i].Quantity);

                            iHTML += "<tr>";
                            iHTML += "<td>" + obj[i].Size + "</td>";
                            iHTML += "<td>" + obj[i].DNR + "</td>";
                            iHTML += "<td>" + obj[i].QualityName + "</td>";
                            iHTML += "<td>" + obj[i].Quantity + "</td>";
                            iHTML += "</tr>";
                        }
                        iHTML += "<tr>";
                        iHTML += "<td colspan='4'></td>";
                        iHTML += "<td colspan='2'><b>Total Quantity : " + sum + "<b/></td>";
                        iHTML += "</tr>";
                        $("#data").html(iHTML);
                    }
                },
                error: function (err) {
                    swal(err.statusText);
                }
            });
        }
    </script>
}
